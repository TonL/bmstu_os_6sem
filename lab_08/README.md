# lab_08 (Sockets) - Questions 

Сокет - механизм межпроцессного взаимодействия

- **Через что взаимодействуют сокеты в unix?**
    
    — Через файловую подсистему (специальный файл)
    

- **Через что взаимодействуют сокеты в inet**
    
    — в inet происходит взаимодействие через сетевой адрес 
    
- **Покажите сетевой адрес и порт**

    ```sudo ss -tulpn```

- **Где можем увидеть созданный нами сокет?**
    
    — В файловой системе 
    
    ```ls -lai```
    

- **Что нужно передавать мультиплексору?**

    — Мультиплексору нужно передавать 3 множества дескрипторов из-за специфики работы.

- **Что делает системный вызов accept?**

```
int accept(int sockfd, void *addr, int *addrlen);
```

Устанавливает соединение в ответ на запрос клиента и создает копию сокета для того, чтобы исходный сокет мог продолжать прослушивание

Функция ***accept*** создаёт для общения с клиентом новый сокет и возвращает его дескриптор.
Параметр sockfd задаёт слушающий сокет. После вызова он остаётся в слушающем состоянии и может принимать другие соединения. В структуру, на которую ссылается addr, записывается адрес сокета клиента, который установил соединение с сервером. В переменную, адресуемую указателем addrlen, изначально записывается размер структуры; функция accept записывает туда длину, которая реально была использована. Если вас не интересует адрес клиента, вы можете просто передать NULL в качестве второго и третьего параметров.


- **Какой мультиплексор использовали?**
    
     — select
    
- **Какие аргументы передаёте мультиплексору?** 
    
    ```
    int select(int n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout);
    ```
    
    Функция ***select*** работает с тремя множествами дескрипторов, каждое из которых имеет тип ***fd_set***.
    В множество ***readfds*** записываются дескрипторы сокетов, из которых нам требуется читать данные (слушающие сокеты добавляются в это же множество). Множество writefds должно содержать дескрипторы сокетов, в которые мы собираемся писать, а ***exceptfds*** - дескрипторы сокетов, которые нужно контролировать на возникновение ошибки. Если какое-то множество вас не интересуют, вы можете передать вместо указателя на него NULL. Что касается других параметров, в n нужно записать максимальное значение дескриптора по всем множествам плюс единица, а в timeout - величину таймаута.
    
- **Почему мультиплексирование лучше чем ожидание отдельного сокета (примерная формулировка)?**
    
     — Все соединения опрашиваются одновременно, сокращается время блокировки. 
    


- **Что позволяет INADDR_ANY (в сетевых)?** 
    
    — Подключение к любому свободному айпи адресу
    

socket, bind, listen, select, accept - последовательность сервера для inet

Когда вызывается accept? *(Ответ есть комментариями в коде)*


**P.S. сокеты - это абстракция, будьте осторожнее с формулироваками, когда захотите предписать сокетам какие-то действия, скорее всего, делают это не они, а кто-то другой...**

